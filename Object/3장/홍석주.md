# 역할, 책임, 협력

- 객체지향 패러다임의 핵심
  - 역할(role): 객체들이 협력 안에서 수행하는 책임
  - 책임(responsibility): 객체가 협력에 참여하기 위해 수행하는 로직
  - 협력(collaboration): 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용
- 구현보다는 어떤 협력이 필요하고 협력을 위해 어떤 역할과 책임이 필요한지를 먼저 고민해보자

## 협력

- 객체지향 시스템은 자율적인 객체들의 공동체다.
- 고립적인 존재가 아닌 시스템의 기능이라는 더 큰 목표를 달성하기 위해 다른 객체와 협력하는 사회적인 존재임
- 협력을 위해서 객체는 `메시지 전송(message sending()`을 한다.
- 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없고, 무엇인지도 궁금해할 필요 없다. 다만, 내가 전송한 메시지를 수신하고 원하는 값을 받을 수 있으면 된다.
- 즉, 상태를 직접 관리하고 스스로의 결정에 따라 행동할 수 있는 자율적인 객체를 만들도록 하자
- 자율적인 객체를 만들기 위해선 `캡슐화`를 하라. 캡슐화를 통해 파급 효과를 제한할 수 있기에 변경하기도 용이해지며 결합도를 느슨하게 유지할 수 있다.

> 어떤 객체도 섬이 아니다!

## 책임

- 협력이 갖춰졌으면 다음으로 해야할 것은 협력에 필요한 행동을 수행할 수 있는 적절한 객체를 찾아야 함.
- 협력에 참여하기 위해 객체가 수행하는 행동을 책임이라고 부름.
- 책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장임.
- 책임은 크게 `하는 것(doing)` `아는 것(knwoing)` 두 가지 범주로 세분화 할 수 있음
  - **하는 것**
  - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
  - 다른 객체의 행동을 시작시키는 것
  - 다른 객체의 활동을 제어하고 조절하는 것

  - **아는 것**
  - 사적인 정보에 관해 아는 것
  - 관련된 객체에 관해 아는 것
  - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

### 책임 주도 설계(Responsibility-Drive Design, RDD)

- 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법
- 협력은 객체를 설계하기 위한 구체적인 문맥을 제공한다.
- 협력이 책임을 이끌어내고 책임이 협력에 참여할 객체를 결정한다.
- 책임 주도 설계는 객체의 구현이 아닌 책임에 집중할 수 있게 된다.

1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 된다.

### 메시지가 객체를 결정한다

- 객체에게 책임을 할당하는 데 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택한다.
- 즉, 메시지가 객체를 선택하게 하는 것이다. 이렇게 해야하는 두 가지 이유.
  - 최소한의 인터페이스를 가질 수 있다. 이렇게 되면 객체의 퍼블릭 인터페이스에 어떤 것도 추가하지 않기 때문에 객체는 애플리케이션에 크지도, 작지도 않은 꼭 필요한 크기의 퍼블릭 인터페이스를 가질 수 있다.
  - 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다. 객체의 인터페이스는 무엇을 하는지 표현해야지, 어떻게 수행하는지를 노출해선 안 된다. 메시지를 먼저 식별하면 무엇을 수행할지에 초점을 맞출 수 있다.

### 행동이 상태를 결정한다

- 객체가 협력에 적합한지를 결정하는 것은 그 객체의 상태가 아니라 행동이다.
- 상태에 초점을 맞추게 되면 캡슐화를 저해하기 때문에 행동에 초점을 두어야 한다.

## 역할

### 역할과 협력

- 객체는 협력이라는 주어진 문맥 안에서 특정한 목적을 갖게 된다.
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부름
- 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있다.
- 역할은 다른 것으로 교체할 수 있는 책임의 집합이다.
- 추상화를 잘 해두면 적절하게, 유연하게 교체할 수 있게 된다.
- 협력이라는 문맥 안에서 역할은 특정한 협력에 참여해서 책임을 수행하는 객체의 일부이다.