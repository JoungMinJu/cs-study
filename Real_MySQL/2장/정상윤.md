# 2장 정리

## 2.4 서버 설정

- MySQL 서버는 일반적으로 단 하나의 설정 파일을 사용한다.

- 리눅스/유닉스 계열 - my.cnf, 윈도우 계열 - my.ini

- 시작될 때만 이 설정 파일을 참조(서버 사용 중에는 참조하지 않는다.)

- 다양한 폴더에 존재할 수 있으며 여러개가 있더라도, 처음 발견한 설정 파일을 사용한다.

- mysqld의 '--verbose --help'옵션을 통해, 어떤 설정 파일을 사용하는지 확인 가능


    ### 2.4.1 설정 파일의 구성

    - 설정 파일에 여러 설정을 담을 수 있다. 
    -> Spring의 application.yml 파일과 유사.

    ### 2.4.2 MySQL 시스템 변수 특징

     - MySQL 시스템 변수(System Variables)란?
    
        서버 기동 시, 설정 파일의 내용을 기반으로 메모리나 작동방식을 초기화하고, 접속된 사용자를 제어하기 위해 별도로 저장해 둔 값.

    - 명령어 : SHOW VARIAVLES, SHOW GLOBAL VARIABLES

    - 시스템 변수(설정) 값이 MySQL 서버와 클라이언트에 어떻게 영향을 미치는지 판단하려면 각 변수가 글로벌 변수인지 세션 변수인지 구분할 수 있어야 한다.

    - 시스템 변수의 5가지 속성

        - cmd-Line : 명령행 인자 설정 여부
        - option-file : 설정 파일로 제어 가능 여부
        - system var : 시스템 변수 여부
        - var scope : 시스템 변수 적용 범위
        - Dynamic : 동적 / 정적 변수 여부

    ### 2.4.3 글로벌 변수와 세션 번수

    - 글로벌 변수

        - MySQL 서버 인스턴스에서 전체적으로 영향을 미치는 시스템 변수로서, 단 하나만 존재하는 변수들이 포함.
        - 예) Innodb_buffer_pool_size, key_buffer_size

    - 세션 변수

        - 서버에 접속할 때 기본으로 부여하는 옵션의 Default 값을 제어하는 변수

        - 예) autocommit의 기본값(on)은 글로벌 시스템 변수이지만 각 클라이언트, 커넥션 별로 가지는 값은 세션 변수이다.

        - 설정 파일에 세션 범위의 시스템변수는 대부분 'Both'로 명시되어 있다. 이 경우 커넥션이 생성되는 순간은 글로벌 변수로 설정되지만, 이후에 변경이 가능하다. 하지만 범위가 세션으로 명시된 경우 글로벌 변수로 초기화할 수 없다.

    ### 2.4.4 정적 변수와 동적 변수

    - 서버 기동 중 변경 가능 여부에 따라 정적/동적 변수로 나뉜다.

    -  디스크 혹은 메모리 어느 위치의 시스템 변수를 바꾸는가에서 차이

    - SET - 메모리 O 디스크 반영 X, SET PERSIST 둘다.

    - GLOBAL을 넣고, 빼고를 통해 글로벌/세션 변수 설정

    - SET으로 변경 가능하면 동적 변수, 불가 하면 정적 변수

    - 시스템 변수 범위가 'Both'인 경우, 세션 설정 단위가 우선한다.

    ### 2.4.5 SET PERSIST

    - MySQL 버전에 도입된 명령어.
    
         동적 변수의 경우 SET 명령어를 통해 현재 서버에는 반영시킬 수 있지만, 재시작시 반영되지 않는다.

         이러한 점을 보완하기 위해 도입된 명령어이다.

         SET PERSIST 명령어를 사용하면, 기존의 설정 파일이 아니라 별도의 설정 파일에 변경 내용이 저장된다.

         그리고 MySQL 서버가 다시 시작될 때, 기존의 설정 파일 뿐만이 아니라 별도 설정 파일을 조회하여 시스템 변수를 적용한다.

         SET PERSIST_ONLY 명령어는 현재 서버 적용 X, 재시작시 적용

         
      



    

    


    


