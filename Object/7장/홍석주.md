# 객체 분해

- 인지 과부하를 방지하기 위해 단기 기억 안에 보관할 정보의 양을 조절하는게 좋은데, 이런 정보의 수를 줄이고 본질적인 정보만 남겨 핵심만을 파악하는 것을 `추상화`라고 한다.
- 추상화 메커니즘으론 아래와 두 가지가 있다.
  - 프로시저 추상화: 무엇을 해야하는지 추상화
  - 데이터 추상화 소프트웨어가 무엇을 알아야 하는지 추상화

## 모듈

- 정보 은닉: 시스템을 모듈 단위로 분해하기 위한 기본 원리로 시스템에서 자주 변경되는 부분을 상대적으로 덜 변경되는 안정적인 인터페이스 뒤로 감춰야 함
- 비밀을 결정하고 모듈을 분해한 후에 기능 분해를 이용해 모듈에 필요한 퍼블릭 인터페이스를 구현
- 모듈은 다음 두 가지의 비밀을 감춰야 함
  - 복잡성: 모듈이 너무 복잡한 경우 이해하고 사용하기 어려움. 외부에 모듈을 추상화할 수 있는 간단한 인터페이스를 제공해서 모듈의 복잡도를 낮춤
  - 변경 가능성: 변경 가능한 설계 결정이 외부에 노출될 경우 실제로 변경이 발생했을 때 파급효과가 커짐. 변경 발생 시 하나의 모듈만 수정하면 되도록 변경 가능한 설계 결정을 모듈 내부로 감추고 외부에는 쉽게 변경되지 않을 인터페이스를 제공

## 변경을 기준으로 선택하라

- 타입을 기준으로 절차를 추상화하지 않았다면 클래스를 써도 객체지향 분해가 아님
- 클래스가 추상 데이터 타입의 개념을 따랐는지는 인스턴스의 타입을 표현하는 변수가 있는지 보는 것
- 인스턴스 변수에 저장된 값을 기반으로 메서드 내에서 타입을 명시적으로 구분하는 방식은 객체지향을 위반하는 것으로 간주
- 이런 조건문에 대해선 다형성으로 대체한다. (Replace Type Code with Class)
- 다형성을 활용하면 기존 코드에 영향을 미치지 않고 새로운 객체 유형과 행위를 추가할 수 있다. 이를 `개방-폐쇄 원칙(Open-Closed Principle)`이라고 함
- 설계에 요구되는 변경의 압력이 타입 추가인지 오퍼레이션 추가인지에 따라 결정된다.
  - 타입 추가의 변경 압력이 더 크면 객체지향적으로 작성
  - 오퍼레이션을 추가하는 압력이 높으면 추상 데이터 타입으로 작성

## 협력의 중요성

- 객체지향에서 중요한 것은 언제나 역할, 책임, 협력
- 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션의 구현 방식을 타입별로 분배하는 것은 올바른 접근법이 아님
- 객체의 설계는 책임 주도 설계를 이해하자
- 객체가 참여할 협력을 결정하고 협력에 필요한 책임을 수행하기 위해 어떤 객체가 필요한지 고민하기
- 그 책임을 다양한 방식으로 수행해야 할 때만 타입 계층 안에 각 절차를 추상화
- 타입 계층과 다형성은 협력이라는 문맥 안에서 책임을 수행하는 방법에 관해 고민한 결과물이어야 하며 그 자체가 목적이 되어선 안 됨